"use strict";(self.webpackChunkblox_buddy_landing=self.webpackChunkblox_buddy_landing||[]).push([[432],{1795:(e,t,s)=>{s.d(t,{T:()=>n});var a=s(2555),r=s(9809);const o={placedObjects:[],currentDragItem:null,gamePhase:"building",score:0,blocksPlaced:0,timeElapsed:0},n=(0,r.v)(e=>(0,a.A)((0,a.A)({},o),{},{addObject:t=>e(e=>({placedObjects:[...e.placedObjects,t],blocksPlaced:e.blocksPlaced+1})),removeObject:t=>e(e=>({placedObjects:e.placedObjects.filter(e=>e.id!==t),blocksPlaced:Math.max(0,e.blocksPlaced-1)})),setCurrentDragItem:t=>e({currentDragItem:t}),setGamePhase:t=>e({gamePhase:t}),incrementScore:t=>e(e=>({score:e.score+t})),resetGame:()=>e(o),updateTimeElapsed:t=>e({timeElapsed:t})}))},3432:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var a=s(5043),r=s(3037),o=s(9910),n=s(7),i=s(4226),c=s(5004),l=s(9435),d=s(1523),h=s(579);const p=e=>{let{size:t=8}=e;return(0,h.jsxs)("group",{children:[(0,h.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],position:[0,.01,0],receiveShadow:!0,children:[(0,h.jsx)("planeGeometry",{args:[t,t]}),(0,h.jsx)("meshStandardMaterial",{color:"#1e5e2e",roughness:.95,metalness:0})]}),(0,h.jsx)(d.x,{args:[t,t],cellSize:1,cellThickness:.8,cellColor:"white",sectionSize:4,sectionThickness:1.5,sectionColor:"white",fadeDistance:30,fadeStrength:1,followCamera:!1,infiniteGrid:!1,position:[0,.05,0],rotation:[-Math.PI/2,0,0]}),(0,h.jsxs)("mesh",{position:[0,-.3,0],receiveShadow:!0,castShadow:!0,children:[(0,h.jsx)("boxGeometry",{args:[t+.4,.6,t+.4]}),(0,h.jsx)("meshStandardMaterial",{color:"#654321",roughness:1,metalness:0})]})]})};var f=s(2555),x=s(490),j=s(1795),u=s(2585);const m=e=>{let{position:t,rotation:s=0,isPreview:r=!1,isConnected:o=!1,onPlace:n}=e;const i=(0,a.useRef)(null),[c,d]=(0,a.useState)(!1),p=(0,a.useRef)(null);(0,x.D)(e=>{if(p.current&&o){const t=p.current.material;t&&(t.opacity=.3+.2*Math.sin(3*e.clock.elapsedTime))}});const f=(0,a.useMemo)(()=>{const e=[];for(let t=0;t<5;t++)e.push(.2*t-.4);return e},[]);return(0,h.jsxs)("group",{ref:i,position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>d(!0),onPointerOut:()=>d(!1),onClick:n,children:[(0,h.jsx)(u.az,{args:[.8,.1,.05],position:[0,.3,0],castShadow:!0,receiveShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:r?"#ffffff":"#f5f5f5",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.8,.05,.05],position:[0,.6,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:r?"#ffffff":"#f5f5f5",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.05,.65,.05],position:[-.4,.325,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:r?"#ffffff":"#e0e0e0",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.05,.65,.05],position:[.4,.325,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:r?"#ffffff":"#e0e0e0",opacity:r?.7:1,transparent:r})}),f.map((e,t)=>(0,h.jsx)(u.az,{args:[.08,.5,.03],position:[e,.35,0],castShadow:!0,receiveShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#ffffff",opacity:r?.7:1,transparent:r})},t)),o&&(0,h.jsxs)("mesh",{ref:p,position:[0,.35,0],children:[(0,h.jsx)("boxGeometry",{args:[1.1,.7,.1]}),(0,h.jsx)("meshBasicMaterial",{color:"#00ff88",transparent:!0,opacity:.3,side:l.$EB})]}),c&&!r&&(0,h.jsxs)("mesh",{position:[0,.35,0],children:[(0,h.jsx)("boxGeometry",{args:[1.2,.8,.2]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.2,side:l.$EB})]})]})},g=e=>{let{position:t,rotation:s=0,isPreview:r=!1,onPlace:o}=e;const[n,i]=(0,a.useState)(!1);return(0,h.jsxs)("group",{position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),onClick:o,children:[(0,h.jsxs)("group",{position:[-.25,0,0],children:[(0,h.jsx)(u.az,{args:[.5,.1,.05],position:[0,.3,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#f5f5f5",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.5,.05,.05],position:[0,.6,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#f5f5f5",opacity:r?.7:1,transparent:r})}),[-.15,0,.15].map((e,t)=>(0,h.jsx)(u.az,{args:[.08,.5,.03],position:[e,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#ffffff",opacity:r?.7:1,transparent:r})},"v-".concat(t)))]}),(0,h.jsxs)("group",{position:[0,0,-.25],rotation:[0,Math.PI/2,0],children:[(0,h.jsx)(u.az,{args:[.5,.1,.05],position:[0,.3,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#f5f5f5",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.5,.05,.05],position:[0,.6,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#f5f5f5",opacity:r?.7:1,transparent:r})}),[-.15,0,.15].map((e,t)=>(0,h.jsx)(u.az,{args:[.08,.5,.03],position:[e,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#ffffff",opacity:r?.7:1,transparent:r})},"h-".concat(t)))]}),(0,h.jsx)(u.az,{args:[.1,.65,.1],position:[0,.325,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#e0e0e0",opacity:r?.7:1,transparent:r})}),n&&!r&&(0,h.jsxs)("mesh",{position:[0,.35,0],children:[(0,h.jsx)("boxGeometry",{args:[1,.8,1]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.2})]})]})},S=e=>{let{position:t,rotation:s=0,isPreview:r=!1,onPlace:o}=e;const[n,i]=(0,a.useState)(!1),[c,l]=(0,a.useState)(!1);return(0,h.jsxs)("group",{position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>l(!0),onPointerOut:()=>l(!1),onClick:()=>{r||(i(!n),null===o||void 0===o||o())},children:[(0,h.jsx)(u.az,{args:[.1,.7,.1],position:[-.45,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#d0d0d0",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.1,.7,.1],position:[.45,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#d0d0d0",opacity:r?.7:1,transparent:r})}),(0,h.jsxs)("group",{position:[-.35,0,0],rotation:[0,n?Math.PI/2:0,0],children:[(0,h.jsx)(u.az,{args:[.7,.5,.05],position:[.35,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:n?"#ffc080":"#ffaa60",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.05,.05,.08],position:[.6,.35,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#666666"})})]}),(0,h.jsxs)("mesh",{position:[0,.8,0],children:[(0,h.jsx)("sphereGeometry",{args:[.05,8,8]}),(0,h.jsx)("meshBasicMaterial",{color:n?"#ff0000":"#00ff00"})]}),c&&!r&&(0,h.jsxs)("mesh",{position:[0,.35,0],children:[(0,h.jsx)("boxGeometry",{args:[1.2,.9,.3]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.2})]})]})},y=e=>{let{position:t,rotation:s=0,isPreview:r=!1}=e;const[o,n]=(0,a.useState)(!1);return(0,h.jsxs)("group",{position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[(0,h.jsx)(u.az,{args:[1,.8,1],position:[0,.4,0],castShadow:!0,receiveShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#ff6b6b",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.Sd,{args:[.8,.6,4],position:[0,1,0],rotation:[0,Math.PI/4,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#8b4513",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.3,.5,.05],position:[0,.25,.51],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#654321"})}),(0,h.jsx)(u.az,{args:[.2,.2,.05],position:[.3,.5,.51],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#87ceeb"})}),o&&!r&&(0,h.jsxs)("mesh",{position:[0,.5,0],children:[(0,h.jsx)("boxGeometry",{args:[1.3,1.5,1.3]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.2})]})]})},w=e=>{let{position:t,rotation:s=0,isPreview:r=!1}=e;const o=(0,a.useRef)(null),[n,i]=(0,a.useState)(!1);return(0,x.D)(e=>{o.current&&!r&&(o.current.rotation.z=.02*Math.sin(.5*e.clock.elapsedTime))}),(0,h.jsxs)("group",{ref:o,position:t,onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),children:[(0,h.jsx)(u.T,{args:[.15,.2,.8],position:[0,.4,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#8b4513",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.iy,{args:[.6,8,8],position:[0,1,0],castShadow:!0,receiveShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#228b22",opacity:r?.5:.7,transparent:!0})}),n&&!r&&(0,h.jsxs)("mesh",{position:[0,.7,0],children:[(0,h.jsx)("sphereGeometry",{args:[.8,8,8]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.2})]})]})},M=e=>{let{position:t,rotation:s=0,isPreview:r=!1}=e;const[o,n]=(0,a.useState)(!1),i=(0,a.useRef)(null);return(0,x.D)(e=>{i.current&&o&&!r&&i.current.scale.setScalar(1+.02*Math.sin(3*e.clock.elapsedTime))}),(0,h.jsxs)("group",{position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[(0,h.jsxs)("mesh",{ref:i,castShadow:!0,receiveShadow:!0,children:[(0,h.jsx)("boxGeometry",{args:[.8,.4,.5]}),(0,h.jsx)("meshStandardMaterial",{color:"#f4e04d",roughness:.9,opacity:r?.7:1,transparent:r})]}),[-.2,0,.2].map((e,t)=>(0,h.jsx)(u.az,{args:[.82,.02,.02],position:[0,.1,e],children:(0,h.jsx)("meshStandardMaterial",{color:"#d4c03d"})},t)),o&&!r&&(0,h.jsxs)("mesh",{position:[0,0,0],children:[(0,h.jsx)("boxGeometry",{args:[1,.6,.7]}),(0,h.jsx)("meshBasicMaterial",{color:"#ffff00",transparent:!0,opacity:.3})]})]})},b=e=>{let{position:t,rotation:s=0,isPreview:r=!1}=e;const[o,n]=(0,a.useState)(!1),i=(0,a.useRef)(null);return(0,x.D)(e=>{i.current&&!r&&(i.current.position.y=.15+.01*Math.sin(2*e.clock.elapsedTime))}),(0,h.jsxs)("group",{position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[(0,h.jsx)(u.az,{args:[1,.3,.4],position:[0,.15,0],castShadow:!0,receiveShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#8b7355",opacity:r?.7:1,transparent:r})}),(0,h.jsxs)("mesh",{ref:i,position:[0,.15,0],receiveShadow:!0,children:[(0,h.jsx)("boxGeometry",{args:[.9,.2,.3]}),(0,h.jsx)("meshStandardMaterial",{color:"#4682b4",transparent:!0,opacity:r?.5:.8,roughness:.1,metalness:.8})]}),o&&!r&&(0,h.jsxs)("mesh",{position:[0,.15,0],children:[(0,h.jsx)("boxGeometry",{args:[1.2,.5,.6]}),(0,h.jsx)("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:.3})]})]})},P=e=>{let{position:t,rotation:s=0,isPreview:r=!1}=e;const[o,n]=(0,a.useState)(!1),i=(0,a.useRef)(null);return(0,x.D)(e=>{i.current&&!r&&(i.current.rotation.y=.1*Math.sin(e.clock.elapsedTime))}),(0,h.jsxs)("group",{ref:i,position:t,rotation:[0,s*Math.PI/2,0],onPointerOver:()=>n(!0),onPointerOut:()=>n(!1),children:[(0,h.jsx)(u.T,{args:[.05,.05,1.2],position:[0,.6,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#654321",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.8,.05,.05],position:[0,.9,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#654321",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.iy,{args:[.15,8,8],position:[0,1.1,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#f4e04d",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.Sd,{args:[.2,.2,4],position:[0,1.25,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#8b4513",opacity:r?.7:1,transparent:r})}),(0,h.jsx)(u.az,{args:[.4,.3,.1],position:[0,.7,0],castShadow:!0,children:(0,h.jsx)("meshStandardMaterial",{color:"#ff0000",opacity:r?.7:1,transparent:r})}),o&&!r&&(0,h.jsxs)("mesh",{position:[0,.7,0],children:[(0,h.jsx)("sphereGeometry",{args:[.8,16,16]}),(0,h.jsx)("meshBasicMaterial",{color:"#ff00ff",transparent:!0,opacity:.2})]})]})};var v=s(9692);const k=()=>{const{camera:e,gl:t,scene:s}=(0,x.C)(),{placedObjects:r,addObject:o,removeObject:n,currentDragItem:i,setCurrentDragItem:c}=(0,j.T)(),[d,p]=(0,a.useState)([0,0,0]),[u,k]=(0,a.useState)(0),[z,O]=(0,a.useState)(!1),[E,B]=(0,a.useState)([0,0,0]),[C,G]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),D=(0,a.useRef)(new l.tBo),_=(0,a.useRef)(new l.I9Y),T=e=>Math.round(e),L=e=>("fence"===i||"corner_fence"===i||"gate"===i)&&r.some(t=>{if("fence"===t.type||"corner_fence"===t.type||"gate"===t.type){const s=Math.abs(t.position[0]-e[0]),a=Math.abs(t.position[2]-e[2]);return 1===s&&0===a||0===s&&1===a}return!1}),R=(0,a.useCallback)(s=>{if(!i)return;const a=t.domElement.getBoundingClientRect();_.current.x=(s.clientX-a.left)/a.width*2-1,_.current.y=-(s.clientY-a.top)/a.height*2+1,D.current.setFromCamera(_.current,e);const r=new l.Zcv(new l.Pq0(0,1,0),0),o=new l.Pq0;if(D.current.ray.intersectPlane(r,o),o){const e=T(o.x),t=T(o.z);p([e,0,t])}},[i,e,t]),F=(0,a.useCallback)(e=>{if(C||e.shiftKey)return void(A&&(n(A),I(null)));if(!i)return;const t={id:"".concat(i,"-").concat(Date.now()),type:i,position:d,rotation:[0,u,0]};o(t),"fence"!==i&&"corner_fence"!==i||(B(d),O(!0),setTimeout(()=>O(!1),1e3))},[i,d,u,o,C,A,n]);(0,a.useEffect)(()=>{const e=e=>{"r"===e.key||"R"===e.key?k(e=>(e+1)%4):"d"===e.key||"D"===e.key?(G(e=>!e),c(null)):"Escape"===e.key&&(G(!1),c(null))};return window.addEventListener("keypress",e),()=>window.removeEventListener("keypress",e)},[c]),(0,a.useEffect)(()=>(t.domElement.addEventListener("mousemove",R),t.domElement.addEventListener("click",F),()=>{t.domElement.removeEventListener("mousemove",R),t.domElement.removeEventListener("click",F)}),[t,R,F]);return(0,h.jsxs)(h.Fragment,{children:[(()=>{if(!i)return null;const e=L(d),t={position:d,rotation:u,isPreview:!0,isConnected:e};switch(i){case"fence":return(0,h.jsx)(m,(0,f.A)({},t));case"corner_fence":return(0,h.jsx)(g,(0,f.A)({},t));case"gate":return(0,h.jsx)(S,(0,f.A)({},t));case"house":return(0,h.jsx)(y,(0,f.A)({},t));case"tree":return(0,h.jsx)(w,(0,f.A)({},t));case"hay_bale":return(0,h.jsx)(M,(0,f.A)({},t));case"water_trough":return(0,h.jsx)(b,(0,f.A)({},t));case"scarecrow":return(0,h.jsx)(P,(0,f.A)({},t));default:return null}})(),r.map(e=>{const t=A===e.id;return(0,h.jsxs)("group",{onPointerOver:()=>C&&I(e.id),onPointerOut:()=>I(null),children:[C&&t&&(0,h.jsxs)("mesh",{position:e.position,children:[(0,h.jsx)("boxGeometry",{args:[1.2,1.2,1.2]}),(0,h.jsx)("meshBasicMaterial",{color:"#ff0000",transparent:!0,opacity:.3})]}),(()=>{const t={position:e.position,rotation:e.rotation[1],isPreview:!1};switch(e.type){case"fence":return(0,h.jsx)(m,(0,f.A)((0,f.A)({},t),{},{isConnected:L(e.position)}));case"corner_fence":return(0,h.jsx)(g,(0,f.A)({},t));case"gate":return(0,h.jsx)(S,(0,f.A)({},t));case"house":return(0,h.jsx)(y,(0,f.A)({},t));case"tree":return(0,h.jsx)(w,(0,f.A)({},t));case"hay_bale":return(0,h.jsx)(M,(0,f.A)({},t));case"water_trough":return(0,h.jsx)(b,(0,f.A)({},t));case"scarecrow":return(0,h.jsx)(P,(0,f.A)({},t));default:return null}})()]},e.id)}),z&&(0,h.jsx)(v.s,{position:E,count:30,scale:2,size:3,speed:2,color:"#00ff88"}),i&&!C&&(0,h.jsxs)("mesh",{position:d,rotation:[-Math.PI/2,0,0],children:[(0,h.jsx)("planeGeometry",{args:[1,1]}),(0,h.jsx)("meshBasicMaterial",{color:"#00ff88",transparent:!0,opacity:.2,side:l.$EB})]}),C&&(0,h.jsxs)("mesh",{position:[0,3,0],children:[(0,h.jsx)("boxGeometry",{args:[.5,.5,.5]}),(0,h.jsx)("meshBasicMaterial",{color:"#ff0000"})]})]})},z=()=>(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"w-full h-full relative",children:[(0,h.jsx)(r.Hl,{shadows:!0,dpr:[1,2],gl:{antialias:!0,toneMapping:l.FV,toneMappingExposure:1.2,alpha:!1},style:{background:"transparent"},children:(0,h.jsxs)(a.Suspense,{fallback:null,children:[(0,h.jsx)(o.u,{makeDefault:!0,position:[8,8,8],fov:45,near:.1,far:1e3}),(0,h.jsx)(n.N,{enabled:!1,target:[0,0,0]}),(0,h.jsx)("ambientLight",{intensity:.6}),(0,h.jsx)("directionalLight",{position:[10,15,10],intensity:1.2,castShadow:!0,"shadow-mapSize":[2048,2048],"shadow-camera-near":.5,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10,color:"#ffffff"}),(0,h.jsx)("directionalLight",{position:[-5,8,-5],intensity:.4,color:"#87CEEB"}),(0,h.jsx)("pointLight",{position:[0,10,0],intensity:.3,color:"#ffffff"}),(0,h.jsx)("pointLight",{position:[-8,3,-8],intensity:.3,color:"#F59E0B"}),(0,h.jsx)("pointLight",{position:[8,3,-8],intensity:.3,color:"#10B981"}),(0,h.jsx)(p,{size:8}),(0,h.jsx)(k,{}),(0,h.jsx)(i._,{opacity:.4,scale:10,blur:2,far:4,position:[0,0,0],color:"#000000"}),(0,h.jsx)("fog",{attach:"fog",args:["#6B46C1",15,40]})]})}),(0,h.jsx)(c.a,{})]})})}}]);
//# sourceMappingURL=432.c1ea0931.chunk.js.map